{% extends 'base.html' %}
{% load i18n datatags %}
{% block heading %}
    {% trans 'Advertisement Statistics' %}
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
        google.load("visualization", "1", {packages:["columnchart"]});
        google.setOnLoadCallback(function () {

            /*
            *  Last 30 day view counts chart
            * */
            var data = new google.visualization.DataTable();
            data.addColumn('string', 'Date');
            data.addColumn('number', 'View Counts');
            data.addColumn('number', 'Unique Visits');
            data.addRows({{ last_month_visits|safe }});

            var options = {
                width: 800, height: 250,
                title: 'Last 30 day visit statistics',
                is3D : true,
                vAxis: { title: 'Count' },
                hAxis: { title: 'Time' }

            };

            var chart = new google.visualization.ColumnChart(document.getElementById('stats_view_counts'));
            chart.draw(data, options);
        })


    </script>

{% endblock %}

{% block content %}

    <ul class="breadcrumb">
        <li><a href="{% url dashboard %}">{% trans 'My slots' %}</a>  <span class="divider">/</span></li>
        <li><a href="{{ slot.get_absolute_url }}">{{ slot.title }}</a>  <span class="divider">/</span></li>
        <li class="active"> {{ slot.title }} </li>
    </ul>

    <div id="stats_view_counts"></div>

    <h3>{% trans 'Last 30 visits' %}</h3>

    {% data_table slot.get_last_visitors "ip_address,get_user_agent,visit_count,last_visit_date,advertisement" %}

{% endblock %}