{% extends 'base.html' %}
{% load i18n datatags %}
{% block heading %}
    {% trans 'Advertisement Statistics' %}
{% endblock %}

{% block javascripts %}
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script defer src="{{ MEDIA_URL }}js/charts.js"></script>
    <script type="text/javascript">
        google.load("visualization", "1", {packages:["columnchart"]});
        $(function () {
            $("#stats_view_counts").build_chart({
                title : '{% trans 'Last 30 day visit statistics' %}',
                columns : [['string', '{% trans 'Date' %}'], ['number','{% trans 'View Counts' %}'], ['number', '{% trans 'Unique Visits' %}']],
                rows : {{ last_month_visits|safe }}
            })
        })

    </script>

{% endblock %}

{% block content %}

    <ul class="breadcrumb">
        <li><a href="{% url dashboard %}">{% trans 'My slots' %}</a>  <span class="divider">/</span></li>
        <li><a href="{{ advertisement.adslot.get_absolute_url }}">{{ advertisement.adslot.title }}</a>  <span class="divider">/</span></li>
        <li class="active"> {{ advertisement.title }} </li>
    </ul>

    <div id="stats_view_counts"></div>

    <h3>{% trans 'Last 30 visits' %}</h3>

    {% data_table advertisement.get_last_visitors "ip_address,get_user_agent,visit_count,last_visit_date" %}

{% endblock %}